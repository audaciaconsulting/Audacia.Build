# Template: detect SBOM folder and set sbomExists variable
steps:
  # Step: Check for the existence of the SBOM folder
  # - Uses PowerShell to verify if the folder '$(Agent.TempDirectory)/sbom' exists
  # - If the folder exists:
  #   - Logs a message indicating the folder was found
  #   - Sets the pipeline variable `sbomExists` to `true`
  # - If the folder does not exist:
  #   - Logs a message indicating the folder was not found
  #   - Sets the pipeline variable `sbomExists` to `false`
  - pwsh: |
      if (Test-Path '$(Agent.TempDirectory)/sbom') {
        Write-Host "SBOM folder found."
        Write-Host "##vso[task.setvariable variable=sbomExists]true"
      } else {
        Write-Host "SBOM folder NOT found."
        Write-Host "##vso[task.setvariable variable=sbomExists]false"
      }
    name: checkSbom
    displayName: "Detect SBOM folder and set sbomExists variable"
