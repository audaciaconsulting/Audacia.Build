# Job template to deploy to a specific environment
parameters:
  projectPath: ''
  allowedLicensesPath: '' # The JSON file that contains the allowed licenses
  excludedPackagesPath: '' # The JSON file that contains the packages to exclude from checking, e.g. because their license cannot be automatically identified, but we know it's ok

steps:
  - script: npm install -g license-checker
    displayName: Install license checker

  - task: PowerShell@2
    displayName: Run Npm license check
    inputs:
      targetType: inline
      pwsh: true
      script: | 
        license-checker --start src/ui/Audacia.Dissectio.Ui --production --onlyAllow "MIT;Apache-2.0;BSD-3-Clause;Apache-2.0 OR MPL-2.0;MS-EULA;X11;Unlicense;0BSD;BSD-2-Clause" --excludePackages "@audacia/base-url-interceptor@1.0.0"
    